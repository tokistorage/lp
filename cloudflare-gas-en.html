<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" sizes="32x32" href="asset/favicon-32.png">
    <link rel="apple-touch-icon" sizes="180x180" href="asset/apple-touch-icon.png">
    <title>Cloudflare and GAS — Using and Relying Are Different Things | TokiStorage</title>
    <meta name="robots" content="index, follow">
    <meta name="description" content="TokiStorage uses Cloudflare Workers and Google Apps Script for operations. But the data meant to last forever depends on neither. Using and relying are different things.">    <style>
        :root {
            --toki-blue: #1E40AF;
            --toki-blue-dark: #1E3A5F;
            --toki-blue-pale: #EFF6FF;
            --accent-blue: #3B82F6;
            --bg-white: #FFFFFF;
            --bg-section: #DBEAFE;
            --text-primary: #1E293B;
            --text-secondary: #475569;
            --text-muted: #94A3B8;
            --border: #E2E8F0;
            --font-display: 'Hiragino Mincho ProN', 'Yu Mincho', serif;
            --font-body: 'Hiragino Kaku Gothic ProN', 'Yu Gothic', 'Meiryo', sans-serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }

        body {
            font-family: var(--font-body);
            font-weight: 400;
            background: var(--bg-white);
            color: var(--text-primary);
            line-height: 1.9;
            font-size: 16px;
        }

        .article-nav {
            position: fixed; top: 0; left: 0; right: 0; z-index: 1000;
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--border);
            padding: 0.6rem 1.2rem;
            display: flex; align-items: center; justify-content: space-between; gap: 1rem;
        }
        .article-nav .nav-brand {
            font-family: var(--font-display); font-size: 0.9rem; font-weight: 600;
            color: var(--toki-blue); text-decoration: none; white-space: nowrap; flex-shrink: 0;
        }
        .article-nav .nav-right { display: flex; align-items: center; gap: 1rem; }
        .article-nav .nav-label { font-size: 0.6rem; color: var(--text-muted); letter-spacing: 0.08em; text-align: right; line-height: 1.4; }
        .article-nav .lang-switch { font-size: 0.75rem; color: var(--toki-blue); text-decoration: none; padding: 0.3rem 0.6rem; border: 1px solid var(--toki-blue); border-radius: 4px; }
        .article-nav .lang-switch:hover { background: var(--toki-blue); color: #fff; }

        .article-container { max-width: 720px; margin: 0 auto; padding: 5rem 2rem 4rem; }
        .article-header { margin-bottom: 3rem; }
        .article-category { font-size: 0.7rem; letter-spacing: 0.15em; color: var(--toki-blue); margin-bottom: 0.5rem; }
        .article-header h1 { font-family: var(--font-display); font-size: 1.8rem; font-weight: 700; line-height: 1.5; color: var(--text-primary); margin-bottom: 1rem; }
        .article-subtitle { font-size: 0.95rem; color: var(--text-secondary); line-height: 1.8; }

        .article-content h2 { font-family: var(--font-display); font-size: 1.3rem; font-weight: 600; color: var(--toki-blue-dark); margin: 3rem 0 1rem; padding-bottom: 0.5rem; border-bottom: 1px solid var(--border); }
        .article-content h3 { font-family: var(--font-display); font-size: 1.1rem; font-weight: 600; color: var(--text-primary); margin: 2rem 0 0.8rem; }
        .article-content p { margin-bottom: 1.2rem; text-align: justify; }
        .article-content ul, .article-content ol { margin: 0.5rem 0 1.5rem 1.5rem; }
        .article-content li { margin-bottom: 0.5rem; }
        .article-content blockquote { border-left: 3px solid var(--toki-blue); padding: 1rem 1.5rem; margin: 1.5rem 0; background: var(--toki-blue-pale); font-style: italic; color: var(--text-secondary); }
        .article-content strong { color: var(--toki-blue-dark); }
        .article-content code { font-size: 0.88em; background: var(--toki-blue-pale); padding: 0.15em 0.4em; border-radius: 3px; }

        .core-message { background: var(--toki-blue-pale); border-left: 4px solid var(--toki-blue); padding: 1.2rem 1.5rem; margin: 0 0 2rem; font-size: 0.95rem; line-height: 1.8; }

        .phase-table { width: 100%; border-collapse: collapse; margin: 1.5rem 0; font-size: 0.9rem; }
        .phase-table th, .phase-table td { padding: 0.7rem 1rem; border: 1px solid var(--border); text-align: left; }
        .phase-table th { background: var(--toki-blue-pale); font-weight: 600; color: var(--toki-blue-dark); font-size: 0.85rem; }
        .phase-table td { vertical-align: top; }

        .highlight-box { background: linear-gradient(135deg, var(--toki-blue-pale), #fff); border: 1px solid var(--accent-blue); border-radius: 8px; padding: 1.5rem; margin: 2rem 0; text-align: center; }
        .highlight-box p { text-align: center; margin-bottom: 0.5rem; }
        .highlight-box .big { font-family: var(--font-display); font-size: 1.3rem; font-weight: 700; color: var(--toki-blue-dark); }

        .article-footer { margin-top: 4rem; padding: 2rem 0; border-top: 1px solid var(--border); font-size: 0.7rem; color: var(--text-muted); line-height: 2.2; }
        .article-footer a { color: var(--text-muted); text-decoration: none; }
        .article-footer a:hover { text-decoration: underline; }

        @media (max-width: 768px) {
            .article-container { padding: 6rem 1.2rem 3rem; }
            .article-header h1 { font-size: 1.5rem; }
            .article-nav .nav-label { display: none; }
            .phase-table { font-size: 0.8rem; }
            .phase-table th, .phase-table td { padding: 0.5rem 0.6rem; }
        }
        @media print { .article-nav { display: none; } .article-container { padding-top: 2rem; } }
        .nav-brand::before { content: ''; display: inline-block; width: 20px; height: 20px; background: url('asset/tokistorage-icon-512.png') no-repeat center / contain; vertical-align: -3px; margin-right: 5px; }
    </style>
<link rel="stylesheet" href="contact-form.css">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Cloudflare and GAS — Using and Relying Are Different Things | TokiStorage">
    <meta property="og:description" content="TokiStorage uses Cloudflare Workers and Google Apps Script for operations. But the data meant to last forever depends on neither. Using and relying are different things.">
    <meta property="og:url" content="https://tokistorage.github.io/lp/cloudflare-gas-en.html">
    <meta property="og:site_name" content="TokiStorage">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Cloudflare and GAS — Using and Relying Are Different Things | TokiStorage">
    <meta name="twitter:description" content="TokiStorage uses Cloudflare Workers and Google Apps Script for operations. But the data meant to last forever depends on neither. Using and relying are different things.">
    <meta property="og:image" content="https://tokistorage.github.io/lp/asset/tokistorage-icon-512.png">
    <meta property="og:image:width" content="512">
    <meta property="og:image:height" content="512">
    <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "Cloudflare and GAS — Using and Relying Are Different Things",
  "author": {
    "@type": "Person",
    "name": "Takuya Sato",
    "url": "https://tokistorage.github.io/lp/profile.html"
  },
  "publisher": {
    "@type": "Organization",
    "name": "TokiStorage",
    "url": "https://tokistorage.github.io/lp",
    "logo": {
      "@type": "ImageObject",
      "url": "https://tokistorage.github.io/lp/asset/tokistorage-icon-512.png"
    }
  },
  "url": "https://tokistorage.github.io/lp/cloudflare-gas-en.html",
  "inLanguage": "en",
  "mainEntityOfPage": "https://tokistorage.github.io/lp/cloudflare-gas-en.html",
  "description": "TokiStorage uses Cloudflare Workers and Google Apps Script for operations. But the data meant to last forever depends on neither. Using and relying are different things."
}
    </script>
    <link rel="alternate" hreflang="ja" href="https://tokistorage.github.io/lp/cloudflare-gas.html">
    <link rel="alternate" hreflang="en" href="https://tokistorage.github.io/lp/cloudflare-gas-en.html">
    <link rel="alternate" hreflang="x-default" href="https://tokistorage.github.io/lp/cloudflare-gas.html">
    <link rel="canonical" href="https://tokistorage.github.io/lp/cloudflare-gas-en.html">
</head>
<body>

<nav class="article-nav">
    <a href="index-en.html" class="nav-brand">TokiStorage</a>
    <div class="nav-right">
        <span class="nav-label">Technology & Design / Cloudflare & GAS</span>
        <a href="cloudflare-gas.html" class="lang-switch">JA</a>
    </div>
</nav>

<main class="article-container">

    <header class="article-header">
        <p class="article-category">ESSAY — Technology & Design</p>
        <h1>Cloudflare and GAS — Using and Relying Are Different Things</h1>
        <p class="article-subtitle">
            TokiStorage uses Cloudflare Workers and Google Apps Script.<br>
            But the data meant to last forever depends on neither.
        </p>
    </header>

    <article class="article-content">

        <div class="core-message">
            <strong>The point of this essay:</strong> TokiStorage uses Cloudflare Workers and Google Apps Script (GAS) in its operations — order processing, contact forms, page view analytics. We use them because they are convenient. But the data meant to endure a thousand years — the voice embedded in QR codes, physical products, National Diet Library deposits — depends on neither Cloudflare nor GAS. Using a service and relying on it are different things. Architecture is where you draw that line.
        </div>


        <h2>1. Why Cloudflare Workers and GAS</h2>

        <p>A project run by one person needs infrastructure that one person can operate. Not scale — integration.</p>

        <h3>Google Apps Script — An Entire Operations Backend in One File</h3>
        <p>The reason for choosing GAS is straightforward. Email delivery, spreadsheet storage, scheduled execution — functions that normally require three separate services are integrated into a single environment. No contracts, no configuration, zero cost.</p>
        <p>TokiStorage's GAS script (<code>code.gs</code>) is 1,564 lines. Order intake, Wise payment confirmation, storage pipeline automation, daily access reports, payment reminders, monthly partner reports, newsletter auto-generation — <strong>the entire operational backbone of a one-person project fits in a single file</strong>.</p>

        <h3>Cloudflare Workers — Solved in 52 Lines</h3>
        <p>The reason for using a Cloudflare Worker is technically specific. GAS's exec URL returns a 302 redirect, which fails Wise's webhook URL validation. A 52-line proxy solves this. It handles CORS and absorbs URL changes when GAS is redeployed. Zero cost.</p>

        <p>In short, <strong>the operational backend is Cloudflare Workers + GAS + Google Sheets</strong>. It is an external dependency. But this dependency is the result of a rational choice, not a compromise.</p>

        <blockquote>
            What a one-person project needs is not scale, but integration.<br>
            GAS provides email, spreadsheets, and scheduling in a single environment.
        </blockquote>


        <h2>2. The Operational Layer and the Permanent Layer</h2>

        <p>TokiStorage's architecture has two distinct layers.</p>

        <table class="phase-table">
            <tr>
                <th></th>
                <th>Operational Layer</th>
                <th>Permanent Layer</th>
            </tr>
            <tr>
                <td><strong>Purpose</strong></td>
                <td>Order intake, inquiries, analytics</td>
                <td>Preservation of voice and existence</td>
            </tr>
            <tr>
                <td><strong>Dependencies</strong></td>
                <td>Cloudflare Workers, GAS, Google Sheets</td>
                <td>QR code (physical), GitHub, NDL</td>
            </tr>
            <tr>
                <td><strong>Assumed lifespan</strong></td>
                <td>Years to a decade</td>
                <td>100 to 1,000 years</td>
            </tr>
            <tr>
                <td><strong>Replaceability</strong></td>
                <td>Substitutable with other services</td>
                <td>Irreplaceable — data is self-contained</td>
            </tr>
            <tr>
                <td><strong>Impact if stopped</strong></td>
                <td>New orders cannot be received</td>
                <td>None — all existing QR codes remain playable forever</td>
            </tr>
        </table>

        <p>This separation is the heart of the design. <strong>The operational layer may depend on external services. The permanent layer must depend on nothing.</strong></p>

        <p>The voice data embedded in a QR code is self-contained as URL parameters within the QR code itself. No server query is needed. Cloudflare, GAS, Google Sheets — none are involved. Scan the QR code, open it in a browser, and the voice plays.</p>


        <h2>3. What If Cloudflare Disappears</h2>

        <p>If the Cloudflare Worker goes down, the following are affected:</p>

        <ul>
            <li>The QR site's order form can no longer submit</li>
            <li>The QR site's contact form can no longer submit</li>
            <li>Wise webhook notifications stop arriving</li>
        </ul>

        <p>The following are unaffected:</p>

        <ul>
            <li><strong>Every existing QR code</strong> — playback is entirely unaffected</li>
            <li><strong>The QR generation tool</strong> — runs entirely client-side</li>
            <li><strong>Every physical product</strong> — metal plates with inscribed QR codes continue to physically exist</li>
            <li><strong>NDL records</strong> — newsletters deposited to the National Diet Library are independently preserved</li>
        </ul>

        <p>Recovery is straightforward. Rewrite the forms to POST directly to the GAS exec URL, or substitute another proxy service. The Cloudflare Worker code is just 52 lines.</p>


        <h2>4. What If GAS Disappears</h2>

        <p>If GAS reaches End of Life, the following are affected:</p>

        <ul>
            <li>Spreadsheet recording of orders and inquiries stops</li>
            <li>Email notifications stop</li>
            <li>Page view analytics stops</li>
        </ul>

        <p>The following are unaffected:</p>

        <ul>
            <li><strong>Every existing QR code</strong> — playback is entirely unaffected</li>
            <li><strong>Every physical product</strong> — continues to exist unchanged</li>
            <li><strong>NDL records</strong> — independently permanent</li>
            <li><strong>The LP site</strong> — static HTML, so everything except the form and tracker displays normally</li>
        </ul>

        <p>Alternatives exist. The GAS code is a simple 131-line script: receive form data, write to spreadsheet, send email. Equivalent functionality can be replaced with Supabase, Netlify Functions, or a simple email API.</p>


        <h2>5. Principles of Dependency Design</h2>

        <p>TokiStorage's external dependencies follow explicit principles.</p>

        <h3>Principle 1: The permanent layer depends on nothing external</h3>
        <p>QR code data is self-contained as URL parameters. Voice decoding runs in client-side WASM. Physical products are inscribed on metal. NDL deposits are made in both print and digital form. None of these are affected by the life or death of Cloudflare, GAS, GitHub, or BASE.</p>

        <h3>Principle 2: The operational layer uses what is convenient and remains substitutable</h3>
        <p>We use GAS because it is free, fast to set up, and integrates naturally with spreadsheets. We use Cloudflare Workers because it solves GAS's 302 redirect problem. Both are rational choices, but <strong>both are designed to be replaceable tomorrow</strong>.</p>

        <h3>Principle 3: Source code of dependencies is retained in-house</h3>
        <p>The GAS source code (<code>contact-form-gas.js</code>) is stored in the repository. The Cloudflare Worker source code (<code>wise-webhook-proxy.js</code>) is also in the repository. Even if the services disappear, the logic remains in our hands.</p>

        <h3>Principle 4: No secret data flows through the pipeline</h3>
        <p>Fundamentally, there is nothing in the data passing through Cloudflare Workers and GAS that would be harmful if leaked. This is the most foundational design principle of all.</p>

        <blockquote>
            If you use an external service, include the day it disappears in your design.<br>
            And never send secret data through its pipeline.
        </blockquote>


        <h2>6. There Is No Data That Would Hurt If Leaked</h2>

        <p>Here is what flows from the order form through the Cloudflare Worker → GAS → Google Sheets pipeline:</p>

        <table class="phase-table">
            <tr>
                <th>Data</th>
                <th>Through pipeline</th>
                <th>Final destination</th>
            </tr>
            <tr>
                <td><strong>QR URL (voice data)</strong></td>
                <td>Sent as order info</td>
                <td>Inscribed on physical product, published on GitHub (if opted), deposited to NDL (if opted)</td>
            </tr>
            <tr>
                <td><strong>Name & address</strong></td>
                <td>Sent as shipping info</td>
                <td>Shipping label. Included in archive if <code>includePersonal</code> is selected</td>
            </tr>
            <tr>
                <td><strong>Storage options</strong></td>
                <td>Sent as selections</td>
                <td>Instructions for which public preservation layers to activate</td>
            </tr>
            <tr>
                <td><strong>Credit card info</strong></td>
                <td>Never passes through</td>
                <td>Entered and processed directly on Wise's platform (PCI DSS compliant)</td>
            </tr>
        </table>

        <p>The voice data in the QR URL is destined to be inscribed on a physical product, optionally published on GitHub, and optionally deposited to the NDL. It is <strong>data designed for public preservation</strong>. The name and address are shipping logistics — and if the purchaser chooses, they become part of the archive too.</p>

        <p>Credit card information never touches this pipeline. Payment is completed entirely on Wise's platform. After order confirmation, a Wise payment link is emailed to the purchaser, who enters their card details on Wise. No card number is ever recorded in the Cloudflare Worker, in GAS, or in Google Sheets.</p>

        <p><strong>The pipeline carries no secrets</strong> — and this is not coincidence but design. The fact that preserved data is public by intent, and that payment processing is delegated to an external platform — these two design decisions create the structure that makes external services safe to use.</p>

        <p>The origin of this design philosophy is not a technical manual — it is a cemetery. Family crests, surnames, epitaphs — whether in a temple or a public cemetery, a gravestone does not choose its viewer. It does not refuse. What is meant to endure is inscribed with the assumption that anyone may read it. TokiStorage's QR codes follow the same structure.</p>

        <blockquote>
            The best security measure is to have no secrets to protect in the first place.<br>
            Gravestones have known this for centuries.
        </blockquote>


        <h2>7. Conclusion — Using and Relying Are Different Things</h2>

        <div class="highlight-box">
            <p class="big">Using and relying are different things.</p>
            <p>Never place what must not break on external ground.<br>Place what can tolerate breakage wherever is convenient.</p>
        </div>

        <p>TokiStorage uses Cloudflare Workers and GAS. This is fact.</p>

        <p>But every QR code ever produced, every physical product ever manufactured, every newsletter deposited to the NDL — none depend on Cloudflare or GAS. If both services vanish tomorrow, <strong>nothing that is meant to endure will be lost</strong>.</p>

        <p>This is not coincidence. It was designed this way from the start.</p>

        <p>External services are tools. Good tools should be used. But you must never entrust your lifeline to a tool. The lifeline must remain in your own hands.</p>

        <h2>Related Essays</h2>
        <ul>
            <li><a href="uptime-en.html">Uptime & Dependencies — What Lies Beyond 99.9%</a></li>
            <li><a href="ssdlc-en.html">SSDLC — When Security Becomes Ethics</a></li>
            <li><a href="enterprise-architecture-en.html">Enterprise Architecture — The Irreversible Choice of Initial Design</a></li>
            <li><a href="what-is-github-en.html">What Is GitHub</a></li>
        </ul>

    </article>

    <footer class="article-footer">
        <p id="essay-nav-links"></p>
        <p style="margin-top: 2rem; font-size: 0.75rem;">&copy; 2026 TokiStorage</p>
    </footer>

</main>

<script src="contact-form.js" defer></script>
<script src="essay-tts.js?v=20260220"></script>
<script src="essay-nav.js?v=20260220"></script>
<script src="tracker.js" defer></script>
</body>
</html>
